(()=>{var oe=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var N=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Q=N((dt,q)=>{var ae,ue,ie,ce,se,le,ye,be,ge,V,K,_e,de,pe,C,he,we,Oe,Ee,Te,me,Be,Ie,x;(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(t){e(i(r,i(t)))}):typeof q=="object"&&typeof q.exports=="object"?e(i(r,i(q.exports))):e(i(r));function i(t,n){return t!==r&&(typeof Object.create=="function"?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(f,o){return t[f]=n?n(f,o):o}}})(function(e){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(t[f]=n[f])};ae=function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(t,n);function f(){this.constructor=t}t.prototype=n===null?Object.create(n):(f.prototype=n.prototype,new f)},ue=Object.assign||function(t){for(var n,f=1,o=arguments.length;f<o;f++){n=arguments[f];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},ie=function(t,n){var f={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.indexOf(o)<0&&(f[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(f[o[u]]=t[o[u]]);return f},ce=function(t,n,f,o){var u=arguments.length,a=u<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,f):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,n,f,o);else for(var y=t.length-1;y>=0;y--)(c=t[y])&&(a=(u<3?c(a):u>3?c(n,f,a):c(n,f))||a);return u>3&&a&&Object.defineProperty(n,f,a),a},se=function(t,n){return function(f,o){n(f,o,t)}},le=function(t,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,n)},ye=function(t,n,f,o){function u(a){return a instanceof f?a:new f(function(c){c(a)})}return new(f||(f=Promise))(function(a,c){function y(p){try{s(o.next(p))}catch(w){c(w)}}function h(p){try{s(o.throw(p))}catch(w){c(w)}}function s(p){p.done?a(p.value):u(p.value).then(y,h)}s((o=o.apply(t,n||[])).next())})},be=function(t,n){var f={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,u,a,c;return c={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function y(s){return function(p){return h([s,p])}}function h(s){if(o)throw new TypeError("Generator is already executing.");for(;f;)try{if(o=1,u&&(a=s[0]&2?u.return:s[0]?u.throw||((a=u.return)&&a.call(u),0):u.next)&&!(a=a.call(u,s[1])).done)return a;switch(u=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return f.label++,{value:s[1],done:!1};case 5:f.label++,u=s[1],s=[0];continue;case 7:s=f.ops.pop(),f.trys.pop();continue;default:if(a=f.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){f=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){f.label=s[1];break}if(s[0]===6&&f.label<a[1]){f.label=a[1],a=s;break}if(a&&f.label<a[2]){f.label=a[2],f.ops.push(s);break}a[2]&&f.ops.pop(),f.trys.pop();continue}s=n.call(t,f)}catch(p){s=[6,p],u=0}finally{o=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ge=function(t,n){for(var f in t)f!=="default"&&!Object.prototype.hasOwnProperty.call(n,f)&&x(n,t,f)},x=Object.create?function(t,n,f,o){o===void 0&&(o=f),Object.defineProperty(t,o,{enumerable:!0,get:function(){return n[f]}})}:function(t,n,f,o){o===void 0&&(o=f),t[o]=n[f]},V=function(t){var n=typeof Symbol=="function"&&Symbol.iterator,f=n&&t[n],o=0;if(f)return f.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},K=function(t,n){var f=typeof Symbol=="function"&&t[Symbol.iterator];if(!f)return t;var o=f.call(t),u,a=[],c;try{for(;(n===void 0||n-- >0)&&!(u=o.next()).done;)a.push(u.value)}catch(y){c={error:y}}finally{try{u&&!u.done&&(f=o.return)&&f.call(o)}finally{if(c)throw c.error}}return a},_e=function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(K(arguments[n]));return t},de=function(){for(var t=0,n=0,f=arguments.length;n<f;n++)t+=arguments[n].length;for(var o=Array(t),u=0,n=0;n<f;n++)for(var a=arguments[n],c=0,y=a.length;c<y;c++,u++)o[u]=a[c];return o},pe=function(t,n,f){if(f||arguments.length===2)for(var o=0,u=n.length,a;o<u;o++)(a||!(o in n))&&(a||(a=Array.prototype.slice.call(n,0,o)),a[o]=n[o]);return t.concat(a||Array.prototype.slice.call(n))},C=function(t){return this instanceof C?(this.v=t,this):new C(t)},he=function(t,n,f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=f.apply(t,n||[]),u,a=[];return u={},c("next"),c("throw"),c("return"),u[Symbol.asyncIterator]=function(){return this},u;function c(_){o[_]&&(u[_]=function(v){return new Promise(function(P,D){a.push([_,v,P,D])>1||y(_,v)})})}function y(_,v){try{h(o[_](v))}catch(P){w(a[0][3],P)}}function h(_){_.value instanceof C?Promise.resolve(_.value.v).then(s,p):w(a[0][2],_)}function s(_){y("next",_)}function p(_){y("throw",_)}function w(_,v){_(v),a.shift(),a.length&&y(a[0][0],a[0][1])}},we=function(t){var n,f;return n={},o("next"),o("throw",function(u){throw u}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(u,a){n[u]=t[u]?function(c){return(f=!f)?{value:C(t[u](c)),done:u==="return"}:a?a(c):c}:a}},Oe=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],f;return n?n.call(t):(t=typeof V=="function"?V(t):t[Symbol.iterator](),f={},o("next"),o("throw"),o("return"),f[Symbol.asyncIterator]=function(){return this},f);function o(a){f[a]=t[a]&&function(c){return new Promise(function(y,h){c=t[a](c),u(y,h,c.done,c.value)})}}function u(a,c,y,h){Promise.resolve(h).then(function(s){a({value:s,done:y})},c)}},Ee=function(t,n){return Object.defineProperty?Object.defineProperty(t,"raw",{value:n}):t.raw=n,t};var i=Object.create?function(t,n){Object.defineProperty(t,"default",{enumerable:!0,value:n})}:function(t,n){t.default=n};Te=function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var f in t)f!=="default"&&Object.prototype.hasOwnProperty.call(t,f)&&x(n,t,f);return i(n,t),n},me=function(t){return t&&t.__esModule?t:{default:t}},Be=function(t,n,f,o){if(f==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!o:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return f==="m"?o:f==="a"?o.call(t):o?o.value:n.get(t)},Ie=function(t,n,f,o,u){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!u:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?u.call(t,f):u?u.value=f:n.set(t,f),f},e("__extends",ae),e("__assign",ue),e("__rest",ie),e("__decorate",ce),e("__param",se),e("__metadata",le),e("__awaiter",ye),e("__generator",be),e("__exportStar",ge),e("__createBinding",x),e("__values",V),e("__read",K),e("__spread",_e),e("__spreadArrays",de),e("__spreadArray",pe),e("__await",C),e("__asyncGenerator",he),e("__asyncDelegator",we),e("__asyncValues",Oe),e("__makeTemplateObject",Ee),e("__importStar",Te),e("__importDefault",me),e("__classPrivateFieldGet",Be),e("__classPrivateFieldSet",Ie)})});var ve=N(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.isDataLike=void 0;var Ve=oe("buffer");function xe(e){return Ve.Buffer.isBuffer(e)||Array.isArray(e)||e.buffer&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number"}F.isDataLike=xe});var Pe=N(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.isDynamicType=l.isConstantType=l.DATA_TYPES=l.BUILTIN_TYPES=l.NUMBER_TYPE=l.DYNAMIC_TYPE=l.DYNAMIC_NUMBER_TYPE=l.CONSTANT_TYPE=l.CONSTANT_NUMBER_TYPE=void 0;l.CONSTANT_NUMBER_TYPE=["int8","uint8","int16","uint16","int32","uint32","float32","float64"];l.CONSTANT_TYPE=["boolean",...l.CONSTANT_NUMBER_TYPE];l.DYNAMIC_NUMBER_TYPE=["varuint","varint"];l.DYNAMIC_TYPE=[...l.DYNAMIC_NUMBER_TYPE,"string","buffer"];l.NUMBER_TYPE=[...l.CONSTANT_NUMBER_TYPE,...l.DYNAMIC_NUMBER_TYPE];l.BUILTIN_TYPES=[...l.CONSTANT_TYPE,...l.DYNAMIC_TYPE];l.DATA_TYPES=[...l.BUILTIN_TYPES];function qe(e){return l.CONSTANT_TYPE.includes(e)}l.isConstantType=qe;function Fe(e){return l.DYNAMIC_TYPE.includes(e)}l.isDynamicType=Fe});var Z=N(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});var De=Q();De.__exportStar(ve(),G);De.__exportStar(Pe(),G)});var ne=N(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.build=g.setStringEncoding=g.getStringEncoding=g.setValidateByDefault=g.getValidateByDefault=g.getDataType=g.addTypeAlias=g.StringEncoding=void 0;var U=oe("buffer"),X=Z();g.StringEncoding=["ascii","utf8","utf-8","utf16le","ucs2","ucs-2","base64","base64url","latin1","binary","hex"];var M="utf8",$=!0,k={};function Ae(e,r){if(X.BUILTIN_TYPES.indexOf(r)<0)throw new TypeError("Underlying type does not exist. Typo?");k[e]=r}g.addTypeAlias=Ae;function je(e){let r=X.BUILTIN_TYPES,i=e.trim().toLowerCase();if(i in k&&(i=k[i]),r.indexOf(i)===-1)throw new TypeError("Invalid data type for schema: "+e+" -> "+i);return i}g.getDataType=je;function Ge(){return $}g.getValidateByDefault=Ge;function Xe(e){$=e}g.setValidateByDefault=Xe;function We(){return M}g.getStringEncoding=We;function ze(e){let r=e.trim().toLowerCase();if(g.StringEncoding.indexOf(r)>-1)M=r;else throw new TypeError("String encoding not available")}g.setStringEncoding=ze;function W(e,r){for(;e>127;)r[d.byteOffset++]=e&127|128,e>>=7;r[d.byteOffset++]=e&127}function He(e,r){W(e<<1^e>>31,r)}function z(e){let r=0,i=0,t;do t=e[d.byteOffset++],r|=(t&127)<<7*i,i++;while(t&128);return r}function Je(e){let r=z(e);return r>>>1^-(r&1)}function Ke(e,r){let i=U.Buffer.byteLength(e||"",M);W(i,r),d.byteOffset+=r.write(e||"",d.byteOffset,i,M)}function Qe(e){let r=z(e),i=e.toString(M,d.byteOffset,d.byteOffset+r);return d.byteOffset+=r,i}function Ze(e,r){let i=e.length;W(i,r),e.copy(r,d.byteOffset),d.byteOffset+=i}function $e(e){let r=z(e),i=U.Buffer.allocUnsafe(r);return e.copy(i,0,d.byteOffset,d.byteOffset+r),d.byteOffset+=r,i}var ke={boolean:"!!buffer.readUInt8(bag.byteOffset, true); bag.byteOffset += 1;",int8:"buffer.readInt8(bag.byteOffset, true); bag.byteOffset += 1;",uint8:"buffer.readUInt8(bag.byteOffset, true); bag.byteOffset += 1;",int16:"buffer.readInt16BE(bag.byteOffset, true); bag.byteOffset += 2;",uint16:"buffer.readUInt16BE(bag.byteOffset, true); bag.byteOffset += 2;",int32:"buffer.readInt32BE(bag.byteOffset, true); bag.byteOffset += 4;",uint32:"buffer.readUInt32BE(bag.byteOffset, true); bag.byteOffset += 4;",float32:"buffer.readFloatBE(bag.byteOffset, true); bag.byteOffset += 4;",float64:"buffer.readDoubleBE(bag.byteOffset, true); bag.byteOffset += 8;",string:"bag.readString(buffer);",varuint:"bag.readVarUInt(buffer);",varint:"bag.readVarInt(buffer);",buffer:"bag.readBuffer(buffer);"};function et(e,r){switch(e){case"boolean":return"bag.byteOffset = wBuffer.writeUInt8("+r+" ? 1 : 0, bag.byteOffset, true);";case"int8":return"bag.byteOffset = wBuffer.writeInt8("+r+", bag.byteOffset, true);";case"uint8":return"bag.byteOffset = wBuffer.writeUInt8("+r+", bag.byteOffset, true);";case"int16":return"bag.byteOffset = wBuffer.writeInt16BE("+r+", bag.byteOffset, true);";case"uint16":return"bag.byteOffset = wBuffer.writeUInt16BE("+r+", bag.byteOffset, true);";case"int32":return"bag.byteOffset = wBuffer.writeInt32BE("+r+", bag.byteOffset, true);";case"uint32":return"bag.byteOffset = wBuffer.writeUInt32BE("+r+", bag.byteOffset, true);";case"float32":return"bag.byteOffset = wBuffer.writeFloatBE("+r+", bag.byteOffset, true);";case"float64":return"bag.byteOffset = wBuffer.writeDoubleBE("+r+", bag.byteOffset, true);";case"string":return"bag.writeString("+r+", wBuffer);";case"varuint":return"bag.writeVarUInt("+r+", wBuffer);";case"varint":return"bag.writeVarInt("+r+", wBuffer);";case"buffer":return"bag.writeBuffer("+r+", wBuffer);";default:return""}}var tt={boolean:1,int8:1,uint8:1,int16:2,uint16:2,int32:4,uint32:4,float32:4,float64:8},nt={string:e=>{let r=U.Buffer.byteLength(e,M);return S(r)+r},varuint:e=>S(e),varint:e=>rt(e),buffer:e=>{let r=e.length;return S(r)+r}};function S(e){return e<=0?1:Math.floor(Math.log(e)/Math.log(128))+1}function rt(e){return S(e<<1^e>>31)}function ft(e){return U.Buffer.allocUnsafe(e)}var d={allocUnsafe:ft,getVarUIntByteLength:S,dynamicByteCounts:nt,readVarUInt:z,readVarInt:Je,writeVarUInt:W,writeVarInt:He,readString:Qe,writeString:Ke,readBuffer:$e,writeBuffer:Ze,throwTypeError:it,byteOffset:0};function ee(e,r,i,t,n){let f=t<=1?r:r+"xn",o=n!=null?n:"ref"+f+".length",u="j"+r;return"for (let "+u+"="+(e.length-1)+";"+u+"<"+o+";"+u+"++) { "+i+"}"}function ot(e){return"byteC+=bag.getVarUIntByteLength(ref"+e+".length);"}function at(e){return"bag.writeVarUInt(ref"+e+".length,wBuffer);"}function ut(e){return"let "+e+"=bag.readVarUInt(buffer);"}function te(e,r,i,t){return"let ref"+e+"="+t+"; ref"+r+"["+i+"]=ref"+e+";"}function H(e,r,i){return"let ref"+e+"=ref"+r+"["+i+"];"}function Ne(e,r,i,t,n,f,o,u){let a=Se(f,i),c=e?"j"+i:t;f[f.length-1]+=H(r+"xn",a,c),o[o.length-1]+=te(r+"xn",a,c,n),u[u.length-1]+=H(r+"xn",a,c)}function it(e,r,i,t,n){if(typeof e!==r)throw new TypeError(e+" does not match the type of "+r);if(i!==void 0&&e<i)throw new TypeError(e+" is less than minimum allowed value of "+i+" for schema type "+n);if(t!==void 0&&e>t)throw new TypeError(e+" is greater than maximum allowed value of "+t+" for schema type "+n)}function ct(e){let r="bag.throwTypeError("+e+",'Buffer or Uint8Array');";return"if ("+e+" instanceof Uint8Array === false && "+e+" instanceof Buffer === false){"+r+"}"}function Ce(e,r){let i="bag.throwTypeError("+e+",'"+r+"');";return"if (typeof("+e+") !== '"+r+"'){"+i+"}"}function m(e,r,i,t){let n="bag.throwTypeError("+e+",'number',"+r+","+i+",'"+t+"');";return"if (typeof("+e+") !== 'number'||"+e+"<"+r+"||"+e+">"+i+"){"+n+"}"}function st(e,r){let i=34028234663852886e22;switch(e){case"boolean":return Ce(r,"boolean");case"int8":return m(r,-128,127,"int8");case"uint8":return m(r,0,255,"uint8");case"int16":return m(r,-32768,32767,"int16");case"uint16":return m(r,0,65535,"uint16");case"int32":return m(r,-2147483648,2147483647,"int32");case"uint32":return m(r,0,4294967295,"uint32");case"float32":return m(r,-i,i,"float32");case"float64":return m(r,-Number.MAX_VALUE,Number.MAX_VALUE,"float64");case"string":return Ce(r,"string");case"varuint":return m(r,0,2147483647,"varuint");case"varint":return m(r,-1073741824,1073741823,"varint");case"buffer":return ct(r)}}function Ue(e,r,i,t){let n="ref"+r+i;return(t?st(e,n):"")+et(e,n)}function Me(e,r,i){return"ref"+r+i+"="+ke[e]}function Ye(e,r,i){return X.isConstantType(e)?"byteC+="+tt[e]+";":"byteC+=bag.dynamicByteCounts['"+e+"'](ref"+r+i+");"}function Se(e,r){return e.length<=2&&e[e.length-1].length<=0?r:r+"xn"}function lt(e,r){let i=0,t="",n="let ref1={};",f="",o="let ref1=json;",u=[""],a=[""],c=[""],y="",h="",s="",p={a:e};function w(P,D){i++;let J=Object.keys(P).sort(function(B,E){return B<E?-1:B>E?1:0}),O=i;for(let B=0;B<J.length;B++){let E=J[B],I=P[E];D&&(E=+E);let A=typeof E=="number"?E:"'"+E+"'",fe=Array.isArray(I)?"[]":"{}",R=D&&B>=J.length-1;if(R&&(u.push(""),a.push(""),c.push("")),Array.isArray(I)){let b=i+1,T=u.length<=1?b:b+"xn",j="arrLen"+i;u.length===1&&(o+=H(b,O,A),n+=te(b,O,A,"[]"));let Y=at(T),Le=ut(j),Re=ot(T);Ne(R,b,O,A,fe,u,a,c),w(I,!0),y=Y+ee(I,b,u.pop()+y,u.length),h=Le+ee(I,b,a.pop()+h,u.length,j),s=Re+ee(I,b,c.pop()+s,u.length),u.length===1&&(t+=y,y="",n+=h,h="",f+=s,s="")}else if(typeof I=="object"){let b=i+1;u.length===1&&(o+=H(b,O,A),n+=te(b,O,A,"{}")),Ne(R,b,O,A,fe,u,a,c),w(I,!1)}else{let b=D?"":"["+A+"]",T=je(I);P[E]=T;let j=Se(u,O);if(D&&(j+=R?"[j"+O+"]":"["+B+"]"),u[u.length-1]+=Ue(T,j,b,r),a[a.length-1]+=Me(T,j,b),c[c.length-1]+=Ye(T,j,b),u.length>1)continue;let Y=D?O+"["+B+"]":O;t+=Ue(T,Y,b,r),n+=Me(T,Y,b),f+=Ye(T,Y,b)}}}w(p,!1),f="let byteC=0;".concat(f,"let wBuffer=bag.allocUnsafe(byteC);"),t=o.concat(f,t,"return wBuffer;"),n=n.concat("return ref1['a'];");let _=new Function("json","bag",t),v=new Function("buffer","bag",n);return[_,v]}Ae("bool","boolean");function yt(e,r){let[i,t]=lt(e,r!=null?r:$);return{encode(n){return d.byteOffset=0,i({a:n},d)},decode(n){let f=X.isDataLike(n)?{data:n,offset:0}:n;d.byteOffset=f.offset;let o=U.Buffer.isBuffer(f.data)?f.data:U.Buffer.from(f.data),u=t(o,d);return f.offset=d.byteOffset,u}}}g.build=yt});var gt=N(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var re=Q(),bt=re.__importStar(ne());re.__exportStar(Z(),L);re.__exportStar(ne(),L);L.default=bt});gt();})();
